Title: Боль при создании блога на Pelican 
Summary: Моя боль при создании блога на генераторе Pelican. Сумбурно и коротко.  
Date: 2020-11-13  
Author: rate1  
Category: Tutorials  
Tags: pelican, боль  
Slug: bol-pri-sozdanii-bloga-na-pelican  
Status: published  

Для себя определился, что лучшее решение для ведения блога - статически сгенерированный блог. На это есть много причин:

* Мне нравится все минималистичное. Публикация простых заметок в блог - это не та задача для которых нужны базы данных и раздутый функционал движком типа wordpress. Мне всего лишь необходимо выкладывать на блог небольшие кусочки форматированного текста. Статические генераторы сайтов как раз и созданы для такой задачи - идеально.  
* Отсутствие неудобных админок сайта: во всех движках раздражают админки с их редакторами для публикации контента, с кучей каких-то нафиг ненужных полей и выпадающих списков. + нужно учитывать что при работе через админку каждый раз нужно авторизоваться в этой самой админке и дальше кликать для создания статьи. Кроме того нужно как-то заморочиться для бэкапа написанных статей.  
* Быстрота и простота (в теории) публикации контента в сеть: в идеале это должно работать так: открываешь на ноутбуке удобный редактор текста и пишешь статью прямо в нем, сохраняя все это дело в формате .md в папку content. В случае необходимости тут же проверяешь на локальном сервере как это будет выглядеть, после чего одним нажимом комбинации клавиш отправляешь готовую статью в свой блог.  
* Безопасность: блог представляет из себя просто кучку .html страниц.  

Подводя итог можно сказать, что я хочу получить легко разворачиваемое решение которое позволяло бы просто складывать файлы в папку content и "на изи" публиковать их как отдельные статьи в простенький блог в Интернетах. Все по стандартам KISS! Не усложняем на ровном месте.  
На практике столкнулся с некоторыми затруднениями, выбрав в качестве решения генератор Pelican.  
####Причины моей боли при использовании Pelican

* Публикация на S3 Amazon. Решил блог хостить в корзине амазоновской, тем более Pelican с коробки предоставляет такую возможность. Пришлось вникнуть в эти самые корзины немного + установить утилиту aws без которой команда ```make s3_upload``` работать не будет. Помимо установки нужно еще сконфигурировать aws, передав ей значения секретных ключей от своей корзины. Вообще в итоге немного подправил файл **Makefile**:  
```
:::bash
s3_upload: publish
	/usr/local/bin/aws s3 sync $(OUTPUTDIR)/ s3://$(S3_BUCKET)/ --acl public-read --delete
	#s3cmd sync $(OUTPUTDIR)/ s3://$(S3_BUCKET)/
```  
Вторая строчка с использованием утилиты s3cmd - это еще один вариант загрузки контента в корзину s3 Amazon. Кстати этот вариант тоже требует установки и конфигурирования данной утилиты. 
 
* Изначально я пытался использовать утилиту s3cmd, сталкнулся с проблемой mime-типов, при передаче файлов: файлы .css и javascript в итоге возвращались с сервера с типом "text/plain", что никак не могло устроить браузер. Провел несколько часов феерического секса в попытках понять в чем дело и почему так происходит. Пробовал кучу разных вариантов передачи файлов обоими утилитами с разными ключами. В итоге сбросил кэш в CloudFlare и синхронизировал локальный проект с корзиной s3 при помощи aws, и после этого проблем с mime-типами не получал. Так до конца и не уверен что именно помогло, осадок остался от нерешенной задачи.  
* Выбор темы тоже оказался не таким легким и приятным моментом, как хотелось бы. И темы мне не понравились и установка их тоже вызывала какие-то проблемы постоянно. Мне виделось все элементарно, что нужно залить тему в папку с темами и поменять значение константы в файле конфигурации, а на деле все оказалось не так просто. В итоге на текущий момент выбрал кое-как тему **bootstrap2-dark** но и ее пришлось править лобзиком. 
 
![тема для блога Pelican](/images/tema.jpg "Тема bootstrap2-dark для Pelican")

Сейчас мне уже эта тема не нравится, хочется поставить что-то более лаконичное и светлое.  

В итоге, как часто бывает, простота и лаконичность требует усилий и много потраченного времени. Хочется чтобы было решение, которое из коробки работало бы и обеспечивало минимально необходимую функциональность без доработок и глубокого погружения в тему.
